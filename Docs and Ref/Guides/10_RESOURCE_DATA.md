# Resource Data 指南

## 1. 概述

**Resource Data** 功能允許出題者上傳一個包含資源檔案的 ZIP 壓縮檔。這些檔案會針對特定的測試案例（Test Case）選擇性地複製到執行環境中，從而支援需要讀取外部資料檔案（非標準輸入）的題目。

## 2. 運作原理

### 2.1 配置
- **啟用 Resource Data**：在題目設定中，啟用 `resourceData` 選項。
- **上傳 ZIP**：上傳包含資源檔案的 `resource_data.zip` 檔案。

### 2.2 檔案命名規則
ZIP 壓縮檔內的檔案必須遵循嚴格的命名規則，以便映射到特定的測試案例：

格式：`XXYY_filename.ext`

- `XX`：Subtask 編號（2 位數，00-99）
- `YY`：Case 編號（2 位數，00-99）
- `filename.ext`：呈現給學生程式的實際檔名。

**範例：**
- `0001_data.txt` -> 在 Subtask 0, Case 1 執行時複製為 `data.txt`。
- `0100_image.png` -> 在 Subtask 1, Case 0 執行時複製為 `image.png`。

### 2.3 執行流程
1.  **準備階段**：處理提交時，Sandbox 下載並解壓縮 `resource_data.zip`（透過 Redis 快取）。
2.  **案例執行**：在執行每個測試案例之前，Dispatcher 會掃描已解壓縮的資源。
3.  **檔案複製**：任何符合當前 Subtask/Case 前綴（`XXYY_`）的檔案都會被複製到工作目錄，並移除前綴。
4.  **清理**：案例執行後清理檔案。

## 3. 使用場景

-   **檔案 I/O 題目**：學生需要從檔案（例如 `input.txt`）讀取資料而非標準輸入的題目。
-   **資料分析**：提供 CSV、JSON 或圖片檔案供分析。
-   **機器學習**：提供模型權重或資料集。

## 4. 實作細節

-   **Sandbox**：`dispatcher/resource_data.py` 負責處理邏輯。它遍歷資源目錄並複製符合的檔案。
-   **驗證**：Frontend 在上傳時執行嚴格驗證，確保 ZIP 中的所有檔案都遵循命名規則並對應到現有的測試案例。
-   **錯誤處理**：如果資源複製失敗，會記錄為警告。（注意：關鍵資源失敗可能會導致學生程式發生 Runtime Error）。

## 5. 最佳實踐

-   **保持輕量**：過大的資源檔案會減慢執行速度，因為每個案例都需要複製。
-   **唯一名稱**：確保移除前綴後的檔名不會與系統檔案或學生原始碼衝突。
